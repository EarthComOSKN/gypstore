{"version":3,"file":"static/webpack/static/development/pages/product/[pid].js.7369e2ecfd51f1e4e5f2.hot-update.js","sources":["webpack:///./src/features/product/ProductInformation.tsx"],"sourcesContent":["import { Button, Icon, message } from 'antd'\nimport styled from '@emotion/styled'\nimport { useState } from 'react'\nimport { AmountInput } from '../../component/AmountInput'\nimport { GET_ME } from '../navigation/gql'\nimport { useQuery, useMutation } from '@apollo/react-hooks'\nimport { ADD_PRODUCT_TO_CART } from './gql'\n\nconst Container = styled.div`\n  font-size: 16px;\n  & > h4 {\n    margin-bottom: 2rem;\n  }\n`\n\nconst AddCartButton = styled(Button)`\n  background-color: #ff8e0a;\n  width: 100%;\n`\n\nconst StyledAmountInput = styled(AmountInput)`\n  width: 15rem;\n`\n\ntype Props = {\n  product: ProductItem\n}\n\nexport const ProductInformation = (props: Props) => {\n  const { product } = props\n  const [isLoading, setLoading] = useState(false)\n  const [amount, setAmount] = useState(1)\n  const { data, loading } = useQuery(GET_ME)\n  const me = data?.me as User\n  const [addProductToCard] = useMutation(ADD_PRODUCT_TO_CART)\n  if (loading) return <div>Loading ...</div>\n  const { name, description, brand, amount: productAmount, unitType } = product\n  const shid = me?.shoppingCart?.id\n\n  const addToCart = async () => {\n    setLoading(true)\n    try {\n      await addProductToCard({\n        variables: {\n          pid: product.id,\n          amount,\n          shid,\n          key: `${product.id}${shid}`,\n        },\n      })\n    } catch (error) {\n      message.error(`${error}`)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <Container>\n      <h3>{name}</h3>\n      <ul>\n        <li>{description}</li>\n        <li>{brand}</li>\n        <li>\n          {productAmount} {unitType}\n        </li>\n      </ul>\n      <p>จัดส่งได้ภายใน 1-3 วันทำการ</p>\n      <p>จำนวนที่ต้องการ ({unitType})</p>\n      <StyledAmountInput amount={amount} onChange={setAmount} />\n      <AddCartButton disabled={isLoading} onClick={addToCart}>\n        <Icon type=\"shopping-cart\" />\n        เพิ่มไปยังรถเข็น\n      </AddCartButton>\n    </Container>\n  )\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAOA;AAKA;AAQA;AAAA;AACA;AADA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAIA;AACA;AANA;AAAA;AAAA;AACA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAPA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AACA;AAJA;AADA;AACA;AAJA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAYA;AACA;AAbA;AAAA;AAcA;AAdA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAiBA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;;;;A","sourceRoot":""}