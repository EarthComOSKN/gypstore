{"ast":null,"code":"import ApolloClient from 'apollo-boost';\nimport { InMemoryCache } from 'apollo-cache-inmemory';\nimport { HttpLink } from 'apollo-link-http';\nimport { ApolloLink, concat } from 'apollo-link';\nimport fetch from 'isomorphic-unfetch';\nvar uri = true ? 'http://localhost:4000' : 'http://54.255.196.44:4000';\nvar httpLink = new HttpLink({\n  uri: uri,\n  fetch: !true && fetch\n});\nvar requestLink = new ApolloLink(function (operation, forward) {\n  // Retrieve the authorization token from local storage.\n  var token = localStorage.getItem('userToken'); // Use the setContext method to set the HTTP headers.\n\n  operation.setContext({\n    headers: {\n      authorization: token ? \"Bearer \".concat(token) : ''\n    }\n  }); // Call the next link in the middleware chain.\n\n  return forward(operation);\n});\nvar client = new ApolloClient({\n  link: concat(requestLink, httpLink),\n  cache: new InMemoryCache()\n});\nexport default client;","map":{"version":3,"sources":["/Users/nutchanonploypray/work/gypstore/frontend/src/apollo-client.ts"],"names":["ApolloClient","InMemoryCache","HttpLink","ApolloLink","concat","fetch","uri","httpLink","requestLink","operation","forward","token","localStorage","getItem","setContext","headers","authorization","client","link","cache"],"mappings":"AAAA,OAAOA,YAAP,MAAyB,cAAzB;AACA,SAASC,aAAT,QAA8B,uBAA9B;AACA,SAASC,QAAT,QAAyB,kBAAzB;AAEA,SAASC,UAAT,EAAqBC,MAArB,QAAmC,aAAnC;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AAGA,IAAMC,GAAG,GACP,OACI,uBADJ,GAEI,2BAHN;AAKA,IAAMC,QAAQ,GAAG,IAAIL,QAAJ,CAAa;AAAEI,EAAAA,GAAG,EAAHA,GAAF;AAAOD,EAAAA,KAAK,EAAE,SAAoBA;AAAlC,CAAb,CAAjB;AAEA,IAAMG,WAAW,GAAG,IAAIL,UAAJ,CAAe,UAACM,SAAD,EAAYC,OAAZ,EAAwB;AACzD;AACA,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAd,CAFyD,CAIzD;;AACAJ,EAAAA,SAAS,CAACK,UAAV,CAAqB;AACnBC,IAAAA,OAAO,EAAE;AACPC,MAAAA,aAAa,EAAEL,KAAK,oBAAaA,KAAb,IAAuB;AADpC;AADU,GAArB,EALyD,CAWzD;;AACA,SAAOD,OAAO,CAACD,SAAD,CAAd;AACD,CAbmB,CAApB;AAeA,IAAMQ,MAAM,GAAG,IAAIjB,YAAJ,CAAiB;AAC9BkB,EAAAA,IAAI,EAAEd,MAAM,CAACI,WAAD,EAAcD,QAAd,CADkB;AAE9BY,EAAAA,KAAK,EAAE,IAAIlB,aAAJ;AAFuB,CAAjB,CAAf;AAKA,eAAegB,MAAf","sourcesContent":["import ApolloClient from 'apollo-boost'\nimport { InMemoryCache } from 'apollo-cache-inmemory'\nimport { HttpLink } from 'apollo-link-http'\nimport { onError } from 'apollo-link-error'\nimport { ApolloLink, concat } from 'apollo-link'\nimport fetch from 'isomorphic-unfetch'\n\nimport { createHttpLink } from 'apollo-link-http'\nconst uri =\n  process.env.NODE_ENV !== 'production'\n    ? 'http://localhost:4000'\n    : 'http://54.255.196.44:4000'\n\nconst httpLink = new HttpLink({ uri, fetch: !process.browser && fetch })\n\nconst requestLink = new ApolloLink((operation, forward) => {\n  // Retrieve the authorization token from local storage.\n  const token = localStorage.getItem('userToken')\n\n  // Use the setContext method to set the HTTP headers.\n  operation.setContext({\n    headers: {\n      authorization: token ? `Bearer ${token}` : '',\n    },\n  })\n\n  // Call the next link in the middleware chain.\n  return forward(operation)\n})\n\nconst client = new ApolloClient({\n  link: concat(requestLink, httpLink),\n  cache: new InMemoryCache(),\n})\n\nexport default client\n"]},"metadata":{},"sourceType":"module"}