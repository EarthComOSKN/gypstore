{"ast":null,"code":"import { ApolloClient, ApolloLink, InMemoryCache, HttpLink } from \"apollo-boost\";\nvar uri = true ? \"http://localhost:4000\" : \"http://54.255.196.44:4000\";\nvar httpLink = new HttpLink({\n  uri: uri\n});\nvar authLink = new ApolloLink(function (operation, forward) {\n  // Retrieve the authorization token from local storage.\n  var token = localStorage.getItem(\"user_token\"); // Use the setContext method to set the HTTP headers.\n\n  operation.setContext({\n    headers: {\n      authorization: token ? \"Bearer \".concat(token) : \"\"\n    }\n  }); // Call the next link in the middleware chain.\n\n  return forward(operation);\n});\nvar client = new ApolloClient({\n  link: authLink.concat(httpLink),\n  // Chain it with the HttpLink\n  cache: new InMemoryCache()\n});\nexport default client;","map":{"version":3,"sources":["/Users/nutchanonploypray/work/gypstore/frontend/src/apollo-client.ts"],"names":["ApolloClient","ApolloLink","InMemoryCache","HttpLink","uri","httpLink","authLink","operation","forward","token","localStorage","getItem","setContext","headers","authorization","client","link","concat","cache"],"mappings":"AAAA,SACEA,YADF,EAEEC,UAFF,EAGEC,aAHF,EAIEC,QAJF,QAKO,cALP;AAOA,IAAMC,GAAG,GACP,OACI,uBADJ,GAEI,2BAHN;AAKA,IAAMC,QAAQ,GAAG,IAAIF,QAAJ,CAAa;AAAEC,EAAAA,GAAG,EAAHA;AAAF,CAAb,CAAjB;AAEA,IAAME,QAAQ,GAAG,IAAIL,UAAJ,CAAe,UAACM,SAAD,EAAYC,OAAZ,EAAwB;AACtD;AACA,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAd,CAFsD,CAItD;;AACAJ,EAAAA,SAAS,CAACK,UAAV,CAAqB;AACnBC,IAAAA,OAAO,EAAE;AACPC,MAAAA,aAAa,EAAEL,KAAK,oBAAaA,KAAb,IAAuB;AADpC;AADU,GAArB,EALsD,CAWtD;;AACA,SAAOD,OAAO,CAACD,SAAD,CAAd;AACD,CAbgB,CAAjB;AAeA,IAAMQ,MAAM,GAAG,IAAIf,YAAJ,CAAiB;AAC9BgB,EAAAA,IAAI,EAAEV,QAAQ,CAACW,MAAT,CAAgBZ,QAAhB,CADwB;AACG;AACjCa,EAAAA,KAAK,EAAE,IAAIhB,aAAJ;AAFuB,CAAjB,CAAf;AAKA,eAAea,MAAf","sourcesContent":["import {\n  ApolloClient,\n  ApolloLink,\n  InMemoryCache,\n  HttpLink\n} from \"apollo-boost\";\n\nconst uri =\n  process.env.NODE_ENV !== \"production\"\n    ? \"http://localhost:4000\"\n    : \"http://54.255.196.44:4000\";\n\nconst httpLink = new HttpLink({ uri });\n\nconst authLink = new ApolloLink((operation, forward) => {\n  // Retrieve the authorization token from local storage.\n  const token = localStorage.getItem(\"user_token\");\n\n  // Use the setContext method to set the HTTP headers.\n  operation.setContext({\n    headers: {\n      authorization: token ? `Bearer ${token}` : \"\"\n    }\n  });\n\n  // Call the next link in the middleware chain.\n  return forward(operation);\n});\n\nconst client = new ApolloClient({\n  link: authLink.concat(httpLink), // Chain it with the HttpLink\n  cache: new InMemoryCache()\n});\n\nexport default client;\n"]},"metadata":{},"sourceType":"module"}