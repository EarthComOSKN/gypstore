{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 15rem;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  background-color: #ff8e0a;\\n  width: 100%;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  font-size: 16px;\\n  & > h4 {\\n    margin-bottom: 2rem;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport { Button, Icon, message } from 'antd';\nimport styled from '@emotion/styled';\nimport { useState } from 'react';\nimport { AmountInput } from '../../component/AmountInput';\nimport { GET_ME } from '../navigation/gql';\nimport { useQuery, useMutation } from '@apollo/react-hooks';\nimport { ADD_PRODUCT_TO_CART } from './gql';\nvar Container = styled.div(_templateObject());\nvar AddCartButton = styled(Button)(_templateObject2());\nvar StyledAmountInput = styled(AmountInput)(_templateObject3());\nexport var ProductInformation = function ProductInformation(props) {\n  var _me$shoppingCart;\n\n  var product = props.product;\n\n  var _useState = useState(false),\n      isLoading = _useState[0],\n      setLoading = _useState[1];\n\n  var _useState2 = useState(1),\n      amount = _useState2[0],\n      setAmount = _useState2[1];\n\n  var _useQuery = useQuery(GET_ME),\n      data = _useQuery.data,\n      loading = _useQuery.loading;\n\n  var me = data === null || data === void 0 ? void 0 : data.me;\n\n  var _useMutation = useMutation(ADD_PRODUCT_TO_CART),\n      _useMutation2 = _slicedToArray(_useMutation, 1),\n      addProductToCard = _useMutation2[0];\n\n  if (loading) return __jsx(\"div\", null, \"Loading ...\");\n  var name = product.name,\n      description = product.description,\n      brand = product.brand,\n      productAmount = product.amount,\n      unitType = product.unitType;\n  var shid = me === null || me === void 0 ? void 0 : (_me$shoppingCart = me.shoppingCart) === null || _me$shoppingCart === void 0 ? void 0 : _me$shoppingCart.id;\n\n  var addToCart = function addToCart() {\n    return _regeneratorRuntime.async(function addToCart$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setLoading(true);\n            _context.prev = 1;\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(addProductToCard({\n              variables: {\n                pid: product.id,\n                amount: amount,\n                shid: shid,\n                key: \"\".concat(product.id).concat(shid)\n              }\n            }));\n\n          case 4:\n            message.success(\"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21 \".concat(product.name, \" \\u0E2A\\u0E33\\u0E40\\u0E23\\u0E47\\u0E08\"));\n            _context.next = 10;\n            break;\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](1);\n            message.error(\"\".concat(_context.t0));\n\n          case 10:\n            _context.prev = 10;\n            setLoading(false);\n            return _context.finish(10);\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[1, 7, 10, 13]]);\n  };\n\n  return __jsx(Container, null, __jsx(\"h3\", null, name), __jsx(\"ul\", null, __jsx(\"li\", null, description), __jsx(\"li\", null, brand), __jsx(\"li\", null, productAmount, \" \", unitType)), __jsx(\"p\", null, \"\\u0E08\\u0E31\\u0E14\\u0E2A\\u0E48\\u0E07\\u0E44\\u0E14\\u0E49\\u0E20\\u0E32\\u0E22\\u0E43\\u0E19 1-3 \\u0E27\\u0E31\\u0E19\\u0E17\\u0E33\\u0E01\\u0E32\\u0E23\"), __jsx(\"p\", null, \"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E17\\u0E35\\u0E48\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E01\\u0E32\\u0E23 (\", unitType, \")\"), __jsx(StyledAmountInput, {\n    amount: amount,\n    onChange: setAmount\n  }), __jsx(AddCartButton, {\n    disabled: isLoading,\n    onClick: addToCart\n  }, __jsx(Icon, {\n    type: \"shopping-cart\"\n  }), \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E44\\u0E1B\\u0E22\\u0E31\\u0E07\\u0E23\\u0E16\\u0E40\\u0E02\\u0E47\\u0E19\"));\n};","map":null,"metadata":{},"sourceType":"module"}