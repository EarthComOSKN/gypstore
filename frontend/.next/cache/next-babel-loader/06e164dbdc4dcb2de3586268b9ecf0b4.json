{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/puwong/Developer/senior/gypstore/frontend/src/features/register/SignIn.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  a {\\n    width: 100%;\\n  }\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  float: right;\\n  a {\\n    color: #ff8e0a;\\n    &:hover {\\n      background-color: #ffa53b;\\n      border-color: #ffa53b;\\n    }\\n  }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  width: 80%;\\n  padding-top: 4rem;\\n  max-width: 25rem;\\n  margin: auto;\\n  h1 {\\n    margin-bottom: 45px;\\n  }\\n\\n  .ant-btn-primary {\\n    background-color: #ff8e0a;\\n    border-color: #ff8e0a;\\n    &:hover {\\n      background-color: #ffa53b;\\n      border-color: #ffa53b;\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport { Form, Icon, Input, Button, message } from \"antd\";\nimport styled from \"@emotion/styled\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { LOGIN } from \"./gql\";\nimport { useRouter } from \"next/router\";\nvar Container = styled.div(_templateObject());\nvar LoginForgot = styled.div(_templateObject2());\nvar LoginButton = styled.div(_templateObject3());\n\nvar SignIn = function SignIn(props) {\n  var _useMutation = useMutation(LOGIN),\n      _useMutation2 = _slicedToArray(_useMutation, 1),\n      login = _useMutation2[0];\n\n  var router = useRouter();\n\n  var handleSubmit = function handleSubmit(e) {\n    return _regeneratorRuntime.async(function handleSubmit$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            e.preventDefault();\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(props.form.validateFields(function _callee(err, values) {\n              var email, password, _res$data, _res$data$login, res, token;\n\n              return _regeneratorRuntime.async(function _callee$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      if (err) {\n                        _context.next = 15;\n                        break;\n                      }\n\n                      email = values.email, password = values.password;\n                      _context.prev = 2;\n                      _context.next = 5;\n                      return _regeneratorRuntime.awrap(login({\n                        variables: {\n                          email: email,\n                          password: password\n                        }\n                      }));\n\n                    case 5:\n                      res = _context.sent;\n                      token = res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : (_res$data$login = _res$data.login) === null || _res$data$login === void 0 ? void 0 : _res$data$login.token;\n                      localStorage.setItem(\"userToken\", token);\n                      message.success(\"Login success\");\n                      router.push(\"/\");\n                      _context.next = 15;\n                      break;\n\n                    case 12:\n                      _context.prev = 12;\n                      _context.t0 = _context[\"catch\"](2);\n                      message.error(\"\".concat(_context.t0));\n\n                    case 15:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              }, null, null, [[2, 12]]);\n            }));\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    });\n  };\n\n  var getFieldDecorator = props.form.getFieldDecorator;\n  return __jsx(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, __jsx(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, \"\\u0E40\\u0E02\\u0E49\\u0E32\\u0E2A\\u0E39\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E1A\"), __jsx(Form, {\n    onSubmit: handleSubmit,\n    className: \"login-form\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, __jsx(Form.Item, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, getFieldDecorator(\"email\", {\n    rules: [{\n      required: true,\n      message: \"กรุณาใส่อีเมล\"\n    }]\n  })(__jsx(Input, {\n    prefix: __jsx(Icon, {\n      type: \"user\",\n      style: {\n        color: \"rgba(0,0,0,.25)\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }),\n    placeholder: \"\\u0E2D\\u0E35\\u0E40\\u0E21\\u0E25\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }))), __jsx(Form.Item, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, getFieldDecorator(\"password\", {\n    rules: [{\n      required: true,\n      message: \"กรุณาใส่รหัสผ่าน\"\n    }]\n  })(__jsx(Input, {\n    prefix: __jsx(Icon, {\n      type: \"lock\",\n      style: {\n        color: \"rgba(0,0,0,.25)\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }),\n    type: \"password\",\n    placeholder: \"\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E1C\\u0E48\\u0E32\\u0E19\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }))), __jsx(Form.Item, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, getFieldDecorator(\"remember\", {\n    valuePropName: \"checked\",\n    initialValue: true\n  }), __jsx(LoginForgot, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    href: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, \"\\u0E04\\u0E38\\u0E13\\u0E25\\u0E37\\u0E21\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E1C\\u0E48\\u0E32\\u0E19\\u0E43\\u0E0A\\u0E48\\u0E44\\u0E2B\\u0E21?\")), __jsx(LoginButton, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, __jsx(Button, {\n    type: \"primary\",\n    htmlType: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, \"\\u0E40\\u0E02\\u0E49\\u0E32\\u0E2A\\u0E39\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E1A\")))));\n};\n\nexport default Form.create()(SignIn);","map":{"version":3,"sources":["/Users/puwong/Developer/senior/gypstore/frontend/src/features/register/SignIn.tsx"],"names":["Form","Icon","Input","Button","message","styled","useMutation","LOGIN","useRouter","Container","div","LoginForgot","LoginButton","SignIn","props","login","router","handleSubmit","e","preventDefault","form","validateFields","err","values","email","password","variables","res","token","data","localStorage","setItem","success","push","error","getFieldDecorator","rules","required","color","valuePropName","initialValue","create"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,IAAT,EAAeC,IAAf,EAAqBC,KAArB,EAA4BC,MAA5B,EAA8CC,OAA9C,QAA6D,MAA7D;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AACA,SAASC,WAAT,QAA4B,qBAA5B;AACA,SAASC,KAAT,QAAsB,OAAtB;AACA,SAASC,SAAT,QAA0B,aAA1B;AAEA,IAAMC,SAAS,GAAGJ,MAAM,CAACK,GAAV,mBAAf;AAqBA,IAAMC,WAAW,GAAGN,MAAM,CAACK,GAAV,oBAAjB;AAWA,IAAME,WAAW,GAAGP,MAAM,CAACK,GAAV,oBAAjB;;AAMA,IAAMG,MAAM,GAAG,SAATA,MAAS,CAAAC,KAAK,EAAI;AAAA,qBACNR,WAAW,CAACC,KAAD,CADL;AAAA;AAAA,MACfQ,KADe;;AAEtB,MAAMC,MAAM,GAAGR,SAAS,EAAxB;;AAEA,MAAMS,YAAY,GAAG,SAAfA,YAAe,CAAMC,CAAN;AAAA;AAAA;AAAA;AAAA;AACnBA,YAAAA,CAAC,CAACC,cAAF;AADmB;AAAA,6CAEbL,KAAK,CAACM,IAAN,CAAWC,cAAX,CAA0B,iBAAOC,GAAP,EAAYC,MAAZ;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,0BACzBD,GADyB;AAAA;AAAA;AAAA;;AAEpBE,sBAAAA,KAFoB,GAEAD,MAFA,CAEpBC,KAFoB,EAEbC,QAFa,GAEAF,MAFA,CAEbE,QAFa;AAAA;AAAA;AAAA,uDAIRV,KAAK,CAAC;AACtBW,wBAAAA,SAAS,EAAE;AACTF,0BAAAA,KAAK,EAALA,KADS;AAETC,0BAAAA,QAAQ,EAARA;AAFS;AADW,uBAAD,CAJG;;AAAA;AAIpBE,sBAAAA,GAJoB;AAUpBC,sBAAAA,KAVoB,GAUZD,GAVY,aAUZA,GAVY,oCAUZA,GAAG,CAAEE,IAVO,iEAUZ,UAAWd,KAVC,oDAUZ,gBAAkBa,KAVN;AAW1BE,sBAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCH,KAAlC;AACAxB,sBAAAA,OAAO,CAAC4B,OAAR,CAAgB,eAAhB;AACAhB,sBAAAA,MAAM,CAACiB,IAAP,CAAY,GAAZ;AAb0B;AAAA;;AAAA;AAAA;AAAA;AAe1B7B,sBAAAA,OAAO,CAAC8B,KAAR;;AAf0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAA1B,CAFa;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAArB;;AAJsB,MA2BdC,iBA3Bc,GA2BQrB,KAAK,CAACM,IA3Bd,CA2Bde,iBA3Bc;AA6BtB,SACE,MAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0EADF,EAEE,MAAC,IAAD;AAAM,IAAA,QAAQ,EAAElB,YAAhB;AAA8B,IAAA,SAAS,EAAC,YAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGkB,iBAAiB,CAAC,OAAD,EAAU;AAC1BC,IAAAA,KAAK,EAAE,CAAC;AAAEC,MAAAA,QAAQ,EAAE,IAAZ;AAAkBjC,MAAAA,OAAO,EAAE;AAA3B,KAAD;AADmB,GAAV,CAAjB,CAGC,MAAC,KAAD;AACE,IAAA,MAAM,EAAE,MAAC,IAAD;AAAM,MAAA,IAAI,EAAC,MAAX;AAAkB,MAAA,KAAK,EAAE;AAAEkC,QAAAA,KAAK,EAAE;AAAT,OAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADV;AAEE,IAAA,WAAW,EAAC,gCAFd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHD,CADH,CADF,EAWE,MAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGH,iBAAiB,CAAC,UAAD,EAAa;AAC7BC,IAAAA,KAAK,EAAE,CAAC;AAAEC,MAAAA,QAAQ,EAAE,IAAZ;AAAkBjC,MAAAA,OAAO,EAAE;AAA3B,KAAD;AADsB,GAAb,CAAjB,CAGC,MAAC,KAAD;AACE,IAAA,MAAM,EAAE,MAAC,IAAD;AAAM,MAAA,IAAI,EAAC,MAAX;AAAkB,MAAA,KAAK,EAAE;AAAEkC,QAAAA,KAAK,EAAE;AAAT,OAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADV;AAEE,IAAA,IAAI,EAAC,UAFP;AAGE,IAAA,WAAW,EAAC,kDAHd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHD,CADH,CAXF,EAsBE,MAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGH,iBAAiB,CAAC,UAAD,EAAa;AAC7BI,IAAAA,aAAa,EAAE,SADc;AAE7BC,IAAAA,YAAY,EAAE;AAFe,GAAb,CADpB,EAKE,MAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAG,IAAA,IAAI,EAAC,EAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iIADF,CALF,EAQE,MAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AAAQ,IAAA,IAAI,EAAC,SAAb;AAAuB,IAAA,QAAQ,EAAC,QAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0EADF,CARF,CAtBF,CAFF,CADF;AA0CD,CAvED;;AAyEA,eAAexC,IAAI,CAACyC,MAAL,GAAc5B,MAAd,CAAf","sourcesContent":["import { Form, Icon, Input, Button, Checkbox, message } from \"antd\";\nimport styled from \"@emotion/styled\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { LOGIN } from \"./gql\";\nimport { useRouter } from \"next/router\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 80%;\n  padding-top: 4rem;\n  max-width: 25rem;\n  margin: auto;\n  h1 {\n    margin-bottom: 45px;\n  }\n\n  .ant-btn-primary {\n    background-color: #ff8e0a;\n    border-color: #ff8e0a;\n    &:hover {\n      background-color: #ffa53b;\n      border-color: #ffa53b;\n    }\n  }\n`;\n\nconst LoginForgot = styled.div`\n  float: right;\n  a {\n    color: #ff8e0a;\n    &:hover {\n      background-color: #ffa53b;\n      border-color: #ffa53b;\n    }\n  }\n`;\n\nconst LoginButton = styled.div`\n  a {\n    width: 100%;\n  }\n`;\n\nconst SignIn = props => {\n  const [login] = useMutation(LOGIN);\n  const router = useRouter();\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    await props.form.validateFields(async (err, values) => {\n      if (!err) {\n        const { email, password } = values;\n        try {\n          const res = await login({\n            variables: {\n              email,\n              password\n            }\n          });\n          const token = res?.data?.login?.token;\n          localStorage.setItem(\"userToken\", token);\n          message.success(\"Login success\");\n          router.push(\"/\");\n        } catch (error) {\n          message.error(`${error}`);\n        }\n      }\n    });\n  };\n\n  const { getFieldDecorator } = props.form;\n\n  return (\n    <Container>\n      <h1>เข้าสู่ระบบ</h1>\n      <Form onSubmit={handleSubmit} className=\"login-form\">\n        <Form.Item>\n          {getFieldDecorator(\"email\", {\n            rules: [{ required: true, message: \"กรุณาใส่อีเมล\" }]\n          })(\n            <Input\n              prefix={<Icon type=\"user\" style={{ color: \"rgba(0,0,0,.25)\" }} />}\n              placeholder=\"อีเมล\"\n            />\n          )}\n        </Form.Item>\n        <Form.Item>\n          {getFieldDecorator(\"password\", {\n            rules: [{ required: true, message: \"กรุณาใส่รหัสผ่าน\" }]\n          })(\n            <Input\n              prefix={<Icon type=\"lock\" style={{ color: \"rgba(0,0,0,.25)\" }} />}\n              type=\"password\"\n              placeholder=\"รหัสผ่าน\"\n            />\n          )}\n        </Form.Item>\n        <Form.Item>\n          {getFieldDecorator(\"remember\", {\n            valuePropName: \"checked\",\n            initialValue: true\n          })}\n          <LoginForgot>\n            <a href=\"\">คุณลืมรหัสผ่านใช่ไหม?</a>\n          </LoginForgot>\n          <LoginButton>\n            <Button type=\"primary\" htmlType=\"submit\">\n              เข้าสู่ระบบ\n            </Button>\n          </LoginButton>\n        </Form.Item>\n      </Form>\n    </Container>\n  );\n};\n\nexport default Form.create()(SignIn);\n"]},"metadata":{},"sourceType":"module"}